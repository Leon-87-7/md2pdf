# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

**md2pdf** is a Python CLI tool that converts Markdown files to professionally-styled PDF documents. It's a single-file application ([md2pdf.py](md2pdf.py)) that uses `markdown` for parsing and `pdfkit` (which wraps `wkhtmltopdf`) for PDF generation.

## Architecture

### Core Components

The application consists of a single Python module with four main functions:

1. **`find_wkhtmltopdf()`** ([md2pdf.py:14-54](md2pdf.py#L14-L54)): Auto-detects wkhtmltopdf installation across platforms by checking:
   - System PATH (using `shutil.which`)
   - Common installation locations for Windows, macOS, and Linux
2. **`get_default_css()`**: Returns the default CSS styling with gradient backgrounds and professional typography
3. **`convert_md_to_pdf()`**: Main conversion logic that:
   - Verifies wkhtmltopdf is available
   - Reads the Markdown file
   - Converts MD to HTML using the `markdown` library with extensions: `extra`, `codehilite`, `tables`, `toc`
   - Applies CSS styling (default or custom)
   - Generates PDF via `pdfkit`
4. **`main()`**: CLI entry point using `argparse`

### Dependencies

- **wkhtmltopdf**: External system dependency required for PDF generation
  - **Auto-detected** at runtime using `find_wkhtmltopdf()` ([md2pdf.py:14-54](md2pdf.py#L14-L54))
  - Checks system PATH and common installation locations for Windows, macOS, and Linux
  - Provides helpful installation instructions if not found
- **Python packages**: `markdown>=3.4`, `pdfkit>=1.0.0` (see [requirements.txt](requirements.txt))

## Development Commands

### Installation

```bash
# Install in editable mode (recommended for development)
pip install -e .

# Or install dependencies manually
pip install -r requirements.txt
```

### Running the Tool

```bash
# Basic conversion
md2pdf input.md

# With custom output path
md2pdf input.md -o output.pdf

# With custom CSS
md2pdf input.md --css custom.css
```

### Testing the Tool

```bash
# Test basic conversion (no test suite currently exists)
md2pdf README.md

# Verify the generated PDF opens correctly
```

## wkhtmltopdf Installation

The tool automatically detects wkhtmltopdf installations across platforms. If not found, it provides platform-specific installation instructions:

- **Windows**: Download from https://wkhtmltopdf.org/downloads.html and install to default location
- **macOS**: `brew install wkhtmltopdf` or download from the official site
- **Linux**:
  - Ubuntu/Debian: `sudo apt-get install wkhtmltopdf`
  - Fedora: `sudo dnf install wkhtmltopdf`

The detection checks both the system PATH and common installation locations.

## Styling System

The default CSS uses:
- Gradient backgrounds (purple/blue theme)
- Semi-transparent white boxes for content readability
- Professional typography with Segoe UI font family
- Syntax highlighting via `codehilite` markdown extension
- A4 page size with 2cm margins

Custom CSS files should include styles for all HTML elements generated by the markdown parser (headings, paragraphs, tables, code blocks, etc.).

## Git Commit Guidelines

- Never write this in a git commit:
  ```
  ðŸ¤– Generated with [Claude Code](https://claude.ai/code)              â”‚
  â”‚
  â”‚   Co-Authored-By: Claude <noreply@anthropic.com>"
  ```
